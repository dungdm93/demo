name: Local Action

on:
  push:
  workflow_dispatch:
    inputs:
      coe:
        description: 'continue-on-error in local js action'
        type: boolean
      abcxyz:
        description: abcxyz
        default: abcxyz
      pre:
        description: pre-action
      post:
        description: post-action

jobs:
  local-action:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        env:
          JOB: ${{ toJson(job) }}
          STEPS: ${{ toJson(steps) }}
      - name: Local JS Action
        id: js
        uses: dungdm93/demo/.github/actions/js1@main
        with:
          coe: 'true'
          foobar: 'foobar'
        env:
          ABC: xyz
          COE: ${{ inputs.coe }}
          FOOBAR: ${{ inputs.foobar }}
          JOB: ${{ toJson(job) }}
          STEPS: ${{ toJson(steps) }}
          STEP_INPUTS: ${{ toJson(inputs) }}
        # continue-on-error: ${{ inputs.coe }}
      - name: Local JS Action 2
        id: js2
        uses: dungdm93/demo/.github/actions/js2@main
        env:
          JOB: ${{ toJson(job) }}
          STEPS: ${{ toJson(steps) }}
      - name: Local Composite Action
        id: composite
        uses: ./.github/actions/composite
        if: ${{ 1 == 1 }}
        with:
          coe: 'true'
          foobar: 'foobar'
        env:
          ABC: xyz
          COE: ${{ inputs.coe }}
          FOOBAR: ${{ inputs.foobar }}
          JOB: ${{ toJson(job) }}
          STEPS: ${{ toJson(steps) }}
          STEP_INPUTS: ${{ toJson(inputs) }}
      - name: last
        run: |
          echo "hello world"
        if: always()
        env:
          JOB: ${{ toJson(job) }}
          STEPS: ${{ toJson(steps) }}
